---
import './NavButton.scss';
import { Icon } from 'astro-icon';
---

<div class='nav__main'>
	<div class='nav__container' data-status='hidden'>
		<span class='nav__element' data-status='default'>About Me</span>
		<span class='nav__element' data-status='default'>Jobs</span>
		<span class='nav__element' data-status='default'>Skills</span>
		<span class='nav__element' data-status='default'>Hobbies</span>
		<span class='nav__element' data-status='default'>Contact</span>
	</div>

	<div class='nav__button'>
		<span class='nav__button__container'>
			<span
				class='nav__button__icon nav__button__icon--unpressed'
				data-status='active'
			>
				<Icon name='mdi:menu' width='48' height='48' />
			</span>
			<span
				class='nav__button__icon nav__button__icon--pressed'
				data-status='hidden'
			>
				<Icon name='mdi:close' width='48' height='48' />
			</span>
		</span>
	</div>
</div>

<script is:inline>
	const navButton = document.querySelector('.nav__button__container');
	const unpressedIcon = document.querySelector('.nav__button__icon--unpressed');
	const pressedIcon = document.querySelector('.nav__button__icon--pressed');
	const navContainer = document.querySelector('.nav__container');
	const navElements = document.querySelectorAll('.nav__element');

	navElements.forEach((elem) => {
		elem.addEventListener('click', () => {
			elem.dataset.status = 'click';

			setTimeout(() => {
				elem.dataset.status = 'default';
			}, 300);
		});
	});

	let pressedState = 0;
	navButton.addEventListener('click', () => {
		if (!(pressedState % 2)) {
			unpressedIcon.dataset.status = 'hidden';
			pressedIcon.dataset.status = 'active';
			navContainer.dataset.status = 'active';
		} else {
			unpressedIcon.dataset.status = 'active';
			pressedIcon.dataset.status = 'hidden';
			navContainer.dataset.status = 'hidden';
		}

		console.log({ pressedState });

		pressedState++;
	});
</script>
